#!/bin/zsh
# Универсальный лаунчер для игр
# Автоматически применяет GameMode + NVIDIA PRIME
#
# Использование в Steam/Lutris/XMCL:
# prime-launcher %command%

if [[ $# -eq 0 ]]; then
    echo "Usage: prime-launcher [command] [args...]"
    echo "Автоматически применяет GameMode + NVIDIA GPU"
    echo ""
    echo "Примеры:"
    echo "  Steam: prime-launcher %command%"
    echo "  Lutris: prime-launcher %command%"
    echo "  XMCL: prime-launcher minecraft"
    exit 1
fi

# Проверяем наличие GameMode
if command -v gamemoderun &>/dev/null; then
    GAMEMODE="gamemoderun"
else
    echo "Warning: gamemoderun не найден, запуск без GameMode"
    GAMEMODE=""
fi

# Всегда используем prime-run (NVIDIA GPU) + GameMode
exec $GAMEMODE prime-run "$@"
