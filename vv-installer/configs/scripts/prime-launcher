#!/bin/zsh
# Universal game launcher
# Automatically applies GameMode + NVIDIA PRIME
#
# Usage in Steam/Lutris/XMCL:
# prime-launcher %command%

if [[ $# -eq 0 ]]; then
    echo "Usage: prime-launcher [command] [args...]"
    echo "Automatically applies GameMode + NVIDIA GPU"
    echo ""
    echo "Examples:"
    echo "  Steam: prime-launcher %command%"
    echo "  Lutris: prime-launcher %command%"
    echo "  XMCL: prime-launcher minecraft"
    exit 1
fi

# Check for GameMode
if command -v gamemoderun &>/dev/null; then
    GAMEMODE="gamemoderun"
else
    echo "Warning: gamemoderun not found, running without GameMode"
    GAMEMODE=""
fi

# Always use prime-run (NVIDIA GPU) + GameMode
exec $GAMEMODE prime-run "$@"
